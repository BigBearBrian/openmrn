VPATH := $(SRCDIR): \
         $(SRCDIR)/common \

CSRCS += fileio.c \
         can.c \
         serial.c

CXXSRCS += pipe.cxx \
        gc_pipe.cxx \
        gc_format.cxx

# Find StellarisWare
ifdef STELLARISWAREPATH
CSRCS += stellaris_can.c \
         stellaris_uart.c \
         stellaris_usb_cdc_device.c

VPATH += $(SRCDIR)/stellarisware

endif

ifdef HAVE_MBED
ifneq ($(TARGET),freertos.armv6m)
CPPSRCS += mbed_can.cpp mbed_usbserial.cpp
endif
ARM_CSRCS += mbed_i2c.c

VPATH += $(SRCDIR)/nxp
endif

# NOTE(balazs.racz): This is ugly, because we add a driver of a specific MCU
# depending on the general CPU architecture.
ifeq ($(TARGET),freertos.armv6m)
CSRCS += 11CXX_rom_can.c # malloc.c
VPATH += $(SRCDIR)/nxp
endif
